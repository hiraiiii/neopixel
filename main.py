import array, time
from machine import Pin
import rp2

NUM_LEDS = 64
LED_PIN = 0
MATRIX_LINE = 8

@rp2.asm_pio(sideset_init=rp2.PIO.OUT_LOW, out_shiftdir=rp2.PIO.SHIFT_LEFT, autopull=True, pull_thresh=24)
def ws2812():    
  T1 = 2
  T2 = 5
  T3 = 3
  wrap_target()
  label("bitloop")
  out(x, 1) .side(0) [T3 - 1]
  jmp(not_x, "do_zero") .side(1) [T1 - 1]
  jmp("bitloop") .side(1) [T2 - 1]
  label("do_zero")
  nop() .side(0) [T2 - 1]
  wrap()
sm = rp2.StateMachine(0, ws2812, freq=8_000_000, sideset_base=Pin(LED_PIN))
sm.active(1)
ar = array.array("I", [0 for _ in range(NUM_LEDS)])

def drawpix(num, r, g, b):
  ar[num] = g << 16 | r << 8 | b

matrix = [[[0]* MATRIX_LINE]* MATRIX_LINE]

matrix = [[[0,0,0,5,5,0,0,0],
          [0,0,5,5,5,5,0,0],
          [0,5,4,5,5,4,5,0],
          [0,5,0,5,5,0,5,0],
          [0,5,6,5,5,6,5,0],
          [0,5,4,5,5,4,5,0],
          [0,0,5,0,0,5,0,0],
          [0,0,0,5,5,0,0,0]],# カオナシ
          
          [[0,0,6,6,6,6,0,0],
          [0,6,6,6,6,6,6,0],
          [6,6,9,6,9,6,6,6],
          [6,6,9,6,9,6,6,6],
          [0,6,6,6,6,6,6,0],
          [0,0,6,6,6,6,0,0],
          [0,0,0,6,6,0,0,0],
          [0,0,0,0,6,6,0,0]],# 幽霊
          
          [[3,3,3,0,0,3,3,3],
          [0,3,3,1,1,3,3,0],
          [0,1,1,2,2,1,1,0],
          [2,1,1,2,2,1,1,2],
          [1,2,2,1,1,2,2,1],
          [2,1,1,2,2,1,1,2],
          [0,1,1,2,2,1,1,0],
          [0,0,2,1,1,2,0,0]],# ラズベリー
          
          [[0,0,0,0,0,0,0,0],
          [7,7,7,7,7,7,7,7],
          [0,2,0,2,2,0,2,0],
          [7,7,7,7,7,7,7,7],
          [0,7,0,0,0,0,7,0],
          [0,7,0,0,0,0,7,0],
          [0,7,0,0,0,0,7,0],
          [0,2,0,0,0,0,2,0]],# 鳥居
          
          [[0,0,0,0,0,0,0,0],
          [0,10,10,0,0,10,10,0],
          [10,10,10,10,10,10,10,10],
          [10,10,10,10,10,10,10,10],
          [0,10,10,10,10,10,10,0],
          [0,0,10,10,10,10,0,0],
          [0,0,0,10,10,0,0,0],
          [0,0,0,0,0,0,0,0]],# ♡
          
          [[0,0,0,4,4,0,0,0],
          [0,0,0,4,4,0,0,0],
          [0,4,4,4,4,4,4,0],
          [0,4,4,4,4,4,4,0],
          [0,0,0,4,4,0,0,0],
          [0,0,0,4,4,0,0,0],
          [0,0,0,4,4,0,0,0],
          [0,0,0,4,4,0,0,0]],# 十字架
          
          [[0,0,0,0,0,0,0,0],
          [0,0,10,10,10,10,0,0],
          [0,10,10,10,10,10,10,0],
          [0,10,10,10,10,10,10,0],
          [0,0,10,10,10,10,0,0],
          [0,10,0,10,0,10,0,0],
          [10,0,0,10,0,10,0,0],
          [0,0,10,0,10,0,0,0]],# ラゲー
          
          [[4,0,0,0,0,0,0,4],
          [0,4,0,0,0,0,4,0],
          [0,4,4,4,4,4,4,0],
          [4,4,0,4,4,0,4,4],
          [4,4,4,4,4,4,4,4],
          [4,0,0,0,0,0,0,4],
          [0,4,4,0,0,4,4,0],
          [0,0,0,0,0,0,0,0]],# インベーダー
          
          [[0,0,0,0,0,0,0,0],
          [0,0,0,0,2,3,0,0],
          [0,0,7,7,2,7,0,0],
          [0,7,7,7,7,7,7,0],
          [0,7,7,7,7,7,7,0],
          [0,7,7,7,7,7,7,0],
          [0,0,7,7,7,7,0,0],
          [0,0,0,0,0,0,0,0]],# リンゴ
          
          [[0,0,0,0,0,0,0,0],
          [0,0,6,0,0,6,0,0],
          [0,6,6,6,6,6,6,0],
          [0,6,9,6,6,9,6,0],
          [0,6,9,6,6,9,6,0],
          [0,6,6,6,6,6,6,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0]],# ねこ
          
          [[3,3,3,3,3,3,3,3],
          [3,3,3,3,3,3,3,3],
          [3,0,0,3,3,0,0,3],
          [3,0,0,3,3,0,0,3],
          [3,3,3,0,0,3,3,3],
          [3,3,0,0,0,0,3,3],
          [3,3,0,0,0,0,3,3],
          [3,3,0,3,3,0,3,3]],# たくみ
          
          [[0,0,0,0,0,0,0,0],
          [0,0,0,9,9,0,0,0],
          [9,0,9,9,9,9,0,9],
          [9,9,9,9,9,9,9,9],
          [9,7,9,7,7,9,7,9],
          [9,9,9,7,7,9,9,9],
          [0,9,9,9,9,9,9,0],
          [0,0,0,0,0,0,0,0]],# 王冠
          
          [[10,10,0,0,0,0,10,10],
          [10,10,0,0,0,0,10,10],
          [10,10,10,10,10,10,10,10],
          [0,10,10,10,10,10,10,0],
          [0,10,6,10,10,6,10,0],
          [0,10,10,10,10,10,10,0],
          [0,0,0,10,10,0,0,0],
          [0,0,0,10,10,0,0,0]],# 像
          
          [[0,0,0,0,0,0,0,0],
          [0,0,9,9,0,0,0,0],
          [0,9,9,9,9,0,0,0],
          [2,9,6,9,9,0,0,0],
          [0,9,9,9,9,0,0,0],
          [0,0,9,9,9,9,9,9],
          [0,0,9,9,9,9,0,0],
          [0,0,9,9,9,9,0,0]],# トリ
          
          [[0,0,0,0,0,0,0,0],
          [0,1,1,0,0,1,1,0],
          [0,1,2,0,0,2,1,0],
          [0,1,2,0,0,2,1,0],
          [0,1,1,1,1,1,1,0],
          [0,1,6,1,1,6,1,0],
          [0,1,1,1,1,1,1,0],
          [0,0,0,0,0,0,0,0]],# usagi
          
          [[6,6,6,6,6,6,6,6],
          [6,6,0,6,6,0,6,6],
          [6,6,0,6,0,0,6,6],
          [6,0,0,6,0,0,6,6],
          [6,6,6,6,6,6,6,6],
          [6,7,7,6,6,7,7,6],
          [6,7,7,7,7,7,7,6],
          [6,6,6,6,6,6,6,6]],#???
          
          [[0,0,4,4,4,4,0,0],
          [0,4,4,4,4,4,4,0],
          [4,4,9,4,9,4,4,4],
          [4,4,9,4,9,4,4,4],
          [0,4,4,4,4,4,4,0],
          [0,0,4,4,4,4,0,0],
          [0,0,0,4,4,0,0,0],
          [0,0,0,0,4,4,0,0]],# 幽霊
          
          ]

matrix1 = [[[0,0,6,6,6,6,0,0],
          [0,6,6,6,6,6,6,0],
          [6,6,9,6,9,6,6,6],
          [6,6,9,6,9,6,6,6],
          [0,6,6,6,6,6,6,0],
          [0,0,6,6,6,6,0,0],
          [0,0,0,6,6,0,0,0],
          [0,0,0,0,6,6,0,0]],# ラゲー
          
          [[0,6,6,6,6,0,0,0],
          [6,6,6,6,6,6,0,0],
          [6,9,6,9,6,6,6,0],
          [6,9,6,9,6,6,6,0],
          [6,6,6,6,6,6,0,0],
          [0,6,6,6,6,0,0,0],
          [0,0,6,6,0,0,0,0],
          [0,0,0,6,6,0,0,0]],
          
          [[0,6,6,6,6,0,0,0],
          [6,6,6,6,6,6,0,0],
          [6,6,9,6,9,6,6,0],
          [6,6,9,6,9,6,6,0],
          [6,6,6,6,6,6,0,0],
          [0,6,6,6,6,0,0,0],
          [0,0,6,6,0,0,0,0],
          [0,6,6,0,0,0,0,0]],
          
          [[0,0,6,6,6,6,0,0],
          [0,6,6,6,6,6,6,0],
          [6,6,6,9,6,9,6,6],
          [6,6,6,9,6,9,6,6],
          [0,6,6,6,6,6,6,0],
          [0,0,6,6,6,6,0,0],
          [0,0,0,6,6,0,0,0],
          [0,0,6,6,0,0,0,0]],
          
          [[0,0,0,6,6,6,6,0],
          [0,0,6,6,6,6,6,6],
          [0,6,6,6,9,6,9,6],
          [0,6,6,6,9,6,9,6],
          [0,0,6,6,6,6,6,6],
          [0,0,0,6,6,6,6,0],
          [0,0,0,0,6,6,0,0],
          [0,0,0,6,6,0,0,0]],
          
          [[0,0,0,6,6,6,6,0],
          [0,0,6,6,6,6,6,6],
          [0,6,6,9,6,9,6,6],
          [0,6,6,9,6,9,6,6],
          [0,0,6,6,6,6,6,6],
          [0,0,0,6,6,6,6,0],
          [0,0,0,0,6,6,0,0],
          [0,0,0,0,0,6,6,0]],
          
          [[0,0,6,6,6,6,0,0],
          [0,6,6,6,6,6,6,0],
          [6,6,9,6,9,6,6,6],
          [6,6,9,6,9,6,6,6],
          [0,6,6,6,6,6,6,0],
          [0,0,6,6,6,6,0,0],
          [0,0,0,6,6,0,0,0],
          [0,0,0,0,6,6,0,0]],
           
           [[0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0]],
           
          [[0,0,6,6,6,6,0,0],
          [0,6,6,6,6,6,6,0],
          [6,6,9,6,9,6,6,6],
          [6,6,9,6,9,6,6,6],
          [0,6,6,6,6,6,6,0],
          [0,0,6,6,6,6,0,0],
          [0,0,0,6,6,0,0,0],
          [0,0,0,0,6,6,0,0]],
           
          [[0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0]]
           
          ]


# 色指定配列（1次要素を色番号として表示する色を2次要素の3原色[赤、緑、青]で設定）
#     LED色：0:消灯 ,1:ピンク,2:オレンジ,3:グリーン,4:パープル,5:ホワイト,6:グレー,7赤,8青,9黄,10水色
color_list = [[0, 0, 0], [30, 0, 5], [30, 10, 0], [5, 15, 0], [10, 0, 20], [10, 10, 10],[4,4,4],[30,0,0],[0,0,30],[5,5,0],[0,5,5]]
btn = Pin(2, Pin.IN, Pin.PULL_UP)
btn2 = Pin(17, Pin.IN, Pin.PULL_UP)
state = False
state2 = False
matrixNum = 0
matrixNum1 = 0
while True:
    for i in range(0, MATRIX_LINE):
      for j in range(0, MATRIX_LINE):
        num1 = matrix1[matrixNum1][i][j];
        drawpix((i * MATRIX_LINE) + j, color_list[num1][0], color_list[num1][1], color_list[num1][2])

    sm.put(ar, 8)
    time.sleep_ms(100)

    time.sleep(0.5)
    matrixNum1 += 1
    if matrixNum1 == len(matrix1):
        break

while True:
    if btn2.value() == 0 and state == False:
        state2 = True 
        break
    if btn2.value() == 1:
        state2 = False
    if btn.value() == 0 and state == False:
        state = True
        matrixNum += 1
    if btn.value() == 1:
        state = False
    if matrixNum == len(matrix):
        matrixNum = 0
    num = 0;
    for i in range(0, MATRIX_LINE):
      for j in range(0, MATRIX_LINE):
        num = matrix[matrixNum][i][j];
        drawpix((i * MATRIX_LINE) + j, color_list[num][0], color_list[num][1], color_list[num][2])

    sm.put(ar, 8)
    time.sleep_ms(100)
matrix2 = [[0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0]]
num2 = 0;
for i in range(0, MATRIX_LINE):
  for j in range(0, MATRIX_LINE):
    num2 = matrix2[i][j];
    drawpix((i * MATRIX_LINE) + j, color_list[num2][0], color_list[num2][1], color_list[num2][2])

sm.put(ar, 8)
time.sleep_ms(100)
